<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ts-safe-http-client Demo</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { color: #2c3e50; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 5px; }
    button { padding: 10px 20px; margin-top: 10px; cursor: pointer; }
    .success { color: green; }
    .error { color: red; }
  </style>
</head>
<body>
  <h1>ts-safe-http-client Demo</h1>
  <p>Click the button to fetch data and validate using Zod schema.</p>
  <button id="fetchBtn">Fetch Data</button>
  <pre id="result"></pre>

  <script type="module">
    import { z } from 'https://cdn.jsdelivr.net/npm/zod@3.22.2/dist/zod.mjs';

    const schema = z.object({
      userId: z.number(),
      id: z.number(),
      title: z.string(),
      body: z.string()
    });

    const resultEl = document.getElementById('result');
    const fetchBtn = document.getElementById('fetchBtn');

    fetchBtn.addEventListener('click', async () => {
      resultEl.textContent = 'Loading...';
      resultEl.className = '';
      
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
        const json = await response.json();
        
        const data = schema.parse(json);
        
        resultEl.className = 'success';
        resultEl.textContent = '✅ 검증 성공!\n\n' + JSON.stringify(data, null, 2);
      } catch (err) {
        resultEl.className = 'error';
        resultEl.textContent = '❌ Error: ' + err.message;
      }
    });
  </script>
</body>
</html>